#!/usr/bin/env node
// Koumu version: 0.1.0
"use strict";var Dt=Object.create;var me=Object.defineProperty;var Pt=Object.getOwnPropertyDescriptor;var Bt=Object.getOwnPropertyNames;var Ut=Object.getPrototypeOf,vt=Object.prototype.hasOwnProperty;var f=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var kt=(e,t,s,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Bt(t))!vt.call(e,i)&&i!==s&&me(e,i,{get:()=>t[i],enumerable:!(r=Pt(t,i))||r.enumerable});return e};var Y=(e,t,s)=>(s=e!=null?Dt(Ut(e)):{},kt(t||!e||!e.__esModule?me(s,"default",{value:e,enumerable:!0}):s,e));var be=f((vr,de)=>{"use strict";de.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var J=f((kr,Re)=>{var O=be(),Ce={};for(let e of Object.keys(O))Ce[O[e]]=e;var l={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};Re.exports=l;for(let e of Object.keys(l)){if(!("channels"in l[e]))throw new Error("missing channels property: "+e);if(!("labels"in l[e]))throw new Error("missing channel labels property: "+e);if(l[e].labels.length!==l[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:s}=l[e];delete l[e].channels,delete l[e].labels,Object.defineProperty(l[e],"channels",{value:t}),Object.defineProperty(l[e],"labels",{value:s})}l.rgb.hsl=function(e){let t=e[0]/255,s=e[1]/255,r=e[2]/255,i=Math.min(t,s,r),n=Math.max(t,s,r),o=n-i,a,h;n===i?a=0:t===n?a=(s-r)/o:s===n?a=2+(r-t)/o:r===n&&(a=4+(t-s)/o),a=Math.min(a*60,360),a<0&&(a+=360);let c=(i+n)/2;return n===i?h=0:c<=.5?h=o/(n+i):h=o/(2-n-i),[a,h*100,c*100]};l.rgb.hsv=function(e){let t,s,r,i,n,o=e[0]/255,a=e[1]/255,h=e[2]/255,c=Math.max(o,a,h),u=c-Math.min(o,a,h),g=function(Mt){return(c-Mt)/6/u+1/2};return u===0?(i=0,n=0):(n=u/c,t=g(o),s=g(a),r=g(h),o===c?i=r-s:a===c?i=1/3+t-r:h===c&&(i=2/3+s-t),i<0?i+=1:i>1&&(i-=1)),[i*360,n*100,c*100]};l.rgb.hwb=function(e){let t=e[0],s=e[1],r=e[2],i=l.rgb.hsl(e)[0],n=1/255*Math.min(t,Math.min(s,r));return r=1-1/255*Math.max(t,Math.max(s,r)),[i,n*100,r*100]};l.rgb.cmyk=function(e){let t=e[0]/255,s=e[1]/255,r=e[2]/255,i=Math.min(1-t,1-s,1-r),n=(1-t-i)/(1-i)||0,o=(1-s-i)/(1-i)||0,a=(1-r-i)/(1-i)||0;return[n*100,o*100,a*100,i*100]};function Ft(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}l.rgb.keyword=function(e){let t=Ce[e];if(t)return t;let s=1/0,r;for(let i of Object.keys(O)){let n=O[i],o=Ft(e,n);o<s&&(s=o,r=i)}return r};l.keyword.rgb=function(e){return O[e]};l.rgb.xyz=function(e){let t=e[0]/255,s=e[1]/255,r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,s=s>.04045?((s+.055)/1.055)**2.4:s/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;let i=t*.4124+s*.3576+r*.1805,n=t*.2126+s*.7152+r*.0722,o=t*.0193+s*.1192+r*.9505;return[i*100,n*100,o*100]};l.rgb.lab=function(e){let t=l.rgb.xyz(e),s=t[0],r=t[1],i=t[2];s/=95.047,r/=100,i/=108.883,s=s>.008856?s**(1/3):7.787*s+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let n=116*r-16,o=500*(s-r),a=200*(r-i);return[n,o,a]};l.hsl.rgb=function(e){let t=e[0]/360,s=e[1]/100,r=e[2]/100,i,n,o;if(s===0)return o=r*255,[o,o,o];r<.5?i=r*(1+s):i=r+s-r*s;let a=2*r-i,h=[0,0,0];for(let c=0;c<3;c++)n=t+1/3*-(c-1),n<0&&n++,n>1&&n--,6*n<1?o=a+(i-a)*6*n:2*n<1?o=i:3*n<2?o=a+(i-a)*(2/3-n)*6:o=a,h[c]=o*255;return h};l.hsl.hsv=function(e){let t=e[0],s=e[1]/100,r=e[2]/100,i=s,n=Math.max(r,.01);r*=2,s*=r<=1?r:2-r,i*=n<=1?n:2-n;let o=(r+s)/2,a=r===0?2*i/(n+i):2*s/(r+s);return[t,a*100,o*100]};l.hsv.rgb=function(e){let t=e[0]/60,s=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,n=t-Math.floor(t),o=255*r*(1-s),a=255*r*(1-s*n),h=255*r*(1-s*(1-n));switch(r*=255,i){case 0:return[r,h,o];case 1:return[a,r,o];case 2:return[o,r,h];case 3:return[o,a,r];case 4:return[h,o,r];case 5:return[r,o,a]}};l.hsv.hsl=function(e){let t=e[0],s=e[1]/100,r=e[2]/100,i=Math.max(r,.01),n,o;o=(2-s)*r;let a=(2-s)*i;return n=s*i,n/=a<=1?a:2-a,n=n||0,o/=2,[t,n*100,o*100]};l.hwb.rgb=function(e){let t=e[0]/360,s=e[1]/100,r=e[2]/100,i=s+r,n;i>1&&(s/=i,r/=i);let o=Math.floor(6*t),a=1-r;n=6*t-o,(o&1)!==0&&(n=1-n);let h=s+n*(a-s),c,u,g;switch(o){default:case 6:case 0:c=a,u=h,g=s;break;case 1:c=h,u=a,g=s;break;case 2:c=s,u=a,g=h;break;case 3:c=s,u=h,g=a;break;case 4:c=h,u=s,g=a;break;case 5:c=a,u=s,g=h;break}return[c*255,u*255,g*255]};l.cmyk.rgb=function(e){let t=e[0]/100,s=e[1]/100,r=e[2]/100,i=e[3]/100,n=1-Math.min(1,t*(1-i)+i),o=1-Math.min(1,s*(1-i)+i),a=1-Math.min(1,r*(1-i)+i);return[n*255,o*255,a*255]};l.xyz.rgb=function(e){let t=e[0]/100,s=e[1]/100,r=e[2]/100,i,n,o;return i=t*3.2406+s*-1.5372+r*-.4986,n=t*-.9689+s*1.8758+r*.0415,o=t*.0557+s*-.204+r*1.057,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),n=Math.min(Math.max(0,n),1),o=Math.min(Math.max(0,o),1),[i*255,n*255,o*255]};l.xyz.lab=function(e){let t=e[0],s=e[1],r=e[2];t/=95.047,s/=100,r/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,s=s>.008856?s**(1/3):7.787*s+16/116,r=r>.008856?r**(1/3):7.787*r+16/116;let i=116*s-16,n=500*(t-s),o=200*(s-r);return[i,n,o]};l.lab.xyz=function(e){let t=e[0],s=e[1],r=e[2],i,n,o;n=(t+16)/116,i=s/500+n,o=n-r/200;let a=n**3,h=i**3,c=o**3;return n=a>.008856?a:(n-16/116)/7.787,i=h>.008856?h:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,n*=100,o*=108.883,[i,n,o]};l.lab.lch=function(e){let t=e[0],s=e[1],r=e[2],i;i=Math.atan2(r,s)*360/2/Math.PI,i<0&&(i+=360);let o=Math.sqrt(s*s+r*r);return[t,o,i]};l.lch.lab=function(e){let t=e[0],s=e[1],i=e[2]/360*2*Math.PI,n=s*Math.cos(i),o=s*Math.sin(i);return[t,n,o]};l.rgb.ansi16=function(e,t=null){let[s,r,i]=e,n=t===null?l.rgb.hsv(e)[2]:t;if(n=Math.round(n/50),n===0)return 30;let o=30+(Math.round(i/255)<<2|Math.round(r/255)<<1|Math.round(s/255));return n===2&&(o+=60),o};l.hsv.ansi16=function(e){return l.rgb.ansi16(l.hsv.rgb(e),e[2])};l.rgb.ansi256=function(e){let t=e[0],s=e[1],r=e[2];return t===s&&s===r?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5)};l.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let s=(~~(e>50)+1)*.5,r=(t&1)*s*255,i=(t>>1&1)*s*255,n=(t>>2&1)*s*255;return[r,i,n]};l.ansi256.rgb=function(e){if(e>=232){let n=(e-232)*10+8;return[n,n,n]}e-=16;let t,s=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,i=t%6/5*255;return[s,r,i]};l.rgb.hex=function(e){let s=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(s.length)+s};l.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let s=t[0];t[0].length===3&&(s=s.split("").map(a=>a+a).join(""));let r=parseInt(s,16),i=r>>16&255,n=r>>8&255,o=r&255;return[i,n,o]};l.rgb.hcg=function(e){let t=e[0]/255,s=e[1]/255,r=e[2]/255,i=Math.max(Math.max(t,s),r),n=Math.min(Math.min(t,s),r),o=i-n,a,h;return o<1?a=n/(1-o):a=0,o<=0?h=0:i===t?h=(s-r)/o%6:i===s?h=2+(r-t)/o:h=4+(t-s)/o,h/=6,h%=1,[h*360,o*100,a*100]};l.hsl.hcg=function(e){let t=e[1]/100,s=e[2]/100,r=s<.5?2*t*s:2*t*(1-s),i=0;return r<1&&(i=(s-.5*r)/(1-r)),[e[0],r*100,i*100]};l.hsv.hcg=function(e){let t=e[1]/100,s=e[2]/100,r=t*s,i=0;return r<1&&(i=(s-r)/(1-r)),[e[0],r*100,i*100]};l.hcg.rgb=function(e){let t=e[0]/360,s=e[1]/100,r=e[2]/100;if(s===0)return[r*255,r*255,r*255];let i=[0,0,0],n=t%1*6,o=n%1,a=1-o,h=0;switch(Math.floor(n)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=a,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=a,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=a}return h=(1-s)*r,[(s*i[0]+h)*255,(s*i[1]+h)*255,(s*i[2]+h)*255]};l.hcg.hsv=function(e){let t=e[1]/100,s=e[2]/100,r=t+s*(1-t),i=0;return r>0&&(i=t/r),[e[0],i*100,r*100]};l.hcg.hsl=function(e){let t=e[1]/100,r=e[2]/100*(1-t)+.5*t,i=0;return r>0&&r<.5?i=t/(2*r):r>=.5&&r<1&&(i=t/(2*(1-r))),[e[0],i*100,r*100]};l.hcg.hwb=function(e){let t=e[1]/100,s=e[2]/100,r=t+s*(1-t);return[e[0],(r-t)*100,(1-r)*100]};l.hwb.hcg=function(e){let t=e[1]/100,s=e[2]/100,r=1-s,i=r-t,n=0;return i<1&&(n=(r-i)/(1-i)),[e[0],i*100,n*100]};l.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};l.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};l.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};l.gray.hsl=function(e){return[0,0,e[0]]};l.gray.hsv=l.gray.hsl;l.gray.hwb=function(e){return[0,100,e[0]]};l.gray.cmyk=function(e){return[0,0,0,e[0]]};l.gray.lab=function(e){return[e[0],0,0]};l.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r};l.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var we=f((Fr,_e)=>{var M=J();function $t(){let e={},t=Object.keys(M);for(let s=t.length,r=0;r<s;r++)e[t[r]]={distance:-1,parent:null};return e}function qt(e){let t=$t(),s=[e];for(t[e].distance=0;s.length;){let r=s.pop(),i=Object.keys(M[r]);for(let n=i.length,o=0;o<n;o++){let a=i[o],h=t[a];h.distance===-1&&(h.distance=t[r].distance+1,h.parent=r,s.unshift(a))}}return t}function jt(e,t){return function(s){return t(e(s))}}function Kt(e,t){let s=[t[e].parent,e],r=M[t[e].parent][e],i=t[e].parent;for(;t[i].parent;)s.unshift(t[i].parent),r=jt(M[t[i].parent][i],r),i=t[i].parent;return r.conversion=s,r}_e.exports=function(e){let t=qt(e),s={},r=Object.keys(t);for(let i=r.length,n=0;n<i;n++){let o=r[n];t[o].parent!==null&&(s[o]=Kt(o,t))}return s}});var Te=f(($r,xe)=>{var V=J(),Wt=we(),w={},Gt=Object.keys(V);function Qt(e){let t=function(...s){let r=s[0];return r==null?r:(r.length>1&&(s=r),e(s))};return"conversion"in e&&(t.conversion=e.conversion),t}function Yt(e){let t=function(...s){let r=s[0];if(r==null)return r;r.length>1&&(s=r);let i=e(s);if(typeof i=="object")for(let n=i.length,o=0;o<n;o++)i[o]=Math.round(i[o]);return i};return"conversion"in e&&(t.conversion=e.conversion),t}Gt.forEach(e=>{w[e]={},Object.defineProperty(w[e],"channels",{value:V[e].channels}),Object.defineProperty(w[e],"labels",{value:V[e].labels});let t=Wt(e);Object.keys(t).forEach(r=>{let i=t[r];w[e][r]=Yt(i),w[e][r].raw=Qt(i)})});xe.exports=w});var Ne=f((qr,Oe)=>{"use strict";var Ae=(e,t)=>(...s)=>`\x1B[${e(...s)+t}m`,ye=(e,t)=>(...s)=>{let r=e(...s);return`\x1B[${38+t};5;${r}m`},Ee=(e,t)=>(...s)=>{let r=e(...s);return`\x1B[${38+t};2;${r[0]};${r[1]};${r[2]}m`},D=e=>e,He=(e,t,s)=>[e,t,s],x=(e,t,s)=>{Object.defineProperty(e,t,{get:()=>{let r=s();return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})},z,T=(e,t,s,r)=>{z===void 0&&(z=Te());let i=r?10:0,n={};for(let[o,a]of Object.entries(z)){let h=o==="ansi16"?"ansi":o;o===t?n[h]=e(s,i):typeof a=="object"&&(n[h]=e(a[t],i))}return n};function Jt(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[s,r]of Object.entries(t)){for(let[i,n]of Object.entries(r))t[i]={open:`\x1B[${n[0]}m`,close:`\x1B[${n[1]}m`},r[i]=t[i],e.set(n[0],n[1]);Object.defineProperty(t,s,{value:r,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",x(t.color,"ansi",()=>T(Ae,"ansi16",D,!1)),x(t.color,"ansi256",()=>T(ye,"ansi256",D,!1)),x(t.color,"ansi16m",()=>T(Ee,"rgb",He,!1)),x(t.bgColor,"ansi",()=>T(Ae,"ansi16",D,!0)),x(t.bgColor,"ansi256",()=>T(ye,"ansi256",D,!0)),x(t.bgColor,"ansi16m",()=>T(Ee,"rgb",He,!0)),t}Object.defineProperty(Oe,"exports",{enumerable:!0,get:Jt})});var Le=f((jr,Ie)=>{"use strict";Ie.exports=(e,t=process.argv)=>{let s=e.startsWith("-")?"":e.length===1?"-":"--",r=t.indexOf(s+e),i=t.indexOf("--");return r!==-1&&(i===-1||r<i)}});var De=f((Kr,Me)=>{"use strict";var Vt=require("os"),Se=require("tty"),m=Le(),{env:p}=process,C;m("no-color")||m("no-colors")||m("color=false")||m("color=never")?C=0:(m("color")||m("colors")||m("color=true")||m("color=always"))&&(C=1);"FORCE_COLOR"in p&&(p.FORCE_COLOR==="true"?C=1:p.FORCE_COLOR==="false"?C=0:C=p.FORCE_COLOR.length===0?1:Math.min(parseInt(p.FORCE_COLOR,10),3));function Z(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}function X(e,t){if(C===0)return 0;if(m("color=16m")||m("color=full")||m("color=truecolor"))return 3;if(m("color=256"))return 2;if(e&&!t&&C===void 0)return 0;let s=C||0;if(p.TERM==="dumb")return s;if(process.platform==="win32"){let r=Vt.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in p)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in p)||p.CI_NAME==="codeship"?1:s;if("TEAMCITY_VERSION"in p)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(p.TEAMCITY_VERSION)?1:0;if(p.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in p){let r=parseInt((p.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(p.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(p.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(p.TERM)||"COLORTERM"in p?1:s}function zt(e){let t=X(e,e&&e.isTTY);return Z(t)}Me.exports={supportsColor:zt,stdout:Z(X(!0,Se.isatty(1))),stderr:Z(X(!0,Se.isatty(2)))}});var Be=f((Wr,Pe)=>{"use strict";var Zt=(e,t,s)=>{let r=e.indexOf(t);if(r===-1)return e;let i=t.length,n=0,o="";do o+=e.substr(n,r-n)+t+s,n=r+i,r=e.indexOf(t,n);while(r!==-1);return o+=e.substr(n),o},Xt=(e,t,s,r)=>{let i=0,n="";do{let o=e[r-1]==="\r";n+=e.substr(i,(o?r-1:r)-i)+t+(o?`\r
`:`
`)+s,i=r+1,r=e.indexOf(`
`,i)}while(r!==-1);return n+=e.substr(i),n};Pe.exports={stringReplaceAll:Zt,stringEncaseCRLFWithFirstIndex:Xt}});var $e=f((Gr,Fe)=>{"use strict";var er=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,Ue=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,tr=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,rr=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,sr=new Map([["n",`
`],["r","\r"],["t","	"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e","\x1B"],["a","\x07"]]);function ke(e){let t=e[0]==="u",s=e[1]==="{";return t&&!s&&e.length===5||e[0]==="x"&&e.length===3?String.fromCharCode(parseInt(e.slice(1),16)):t&&s?String.fromCodePoint(parseInt(e.slice(2,-1),16)):sr.get(e)||e}function ir(e,t){let s=[],r=t.trim().split(/\s*,\s*/g),i;for(let n of r){let o=Number(n);if(!Number.isNaN(o))s.push(o);else if(i=n.match(tr))s.push(i[2].replace(rr,(a,h,c)=>h?ke(h):c));else throw new Error(`Invalid Chalk template style argument: ${n} (in style '${e}')`)}return s}function nr(e){Ue.lastIndex=0;let t=[],s;for(;(s=Ue.exec(e))!==null;){let r=s[1];if(s[2]){let i=ir(r,s[2]);t.push([r].concat(i))}else t.push([r])}return t}function ve(e,t){let s={};for(let i of t)for(let n of i.styles)s[n[0]]=i.inverse?null:n.slice(1);let r=e;for(let[i,n]of Object.entries(s))if(!!Array.isArray(n)){if(!(i in r))throw new Error(`Unknown Chalk style: ${i}`);r=n.length>0?r[i](...n):r[i]}return r}Fe.exports=(e,t)=>{let s=[],r=[],i=[];if(t.replace(er,(n,o,a,h,c,u)=>{if(o)i.push(ke(o));else if(h){let g=i.join("");i=[],r.push(s.length===0?g:ve(e,s)(g)),s.push({inverse:a,styles:nr(h)})}else if(c){if(s.length===0)throw new Error("Found extraneous } in Chalk template literal");r.push(ve(e,s)(i.join(""))),i=[],s.pop()}else i.push(u)}),r.push(i.join("")),s.length>0){let n=`Chalk template literal is missing ${s.length} closing bracket${s.length===1?"":"s"} (\`}\`)`;throw new Error(n)}return r.join("")}});var ne=f((Qr,Qe)=>{"use strict";var N=Ne(),{stdout:te,stderr:re}=De(),{stringReplaceAll:or,stringEncaseCRLFWithFirstIndex:ar}=Be(),{isArray:P}=Array,je=["ansi","ansi","ansi256","ansi16m"],A=Object.create(null),hr=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");let s=te?te.level:0;e.level=t.level===void 0?s:t.level},se=class{constructor(t){return Ke(t)}},Ke=e=>{let t={};return hr(t,e),t.template=(...s)=>Ge(t.template,...s),Object.setPrototypeOf(t,B.prototype),Object.setPrototypeOf(t.template,t),t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},t.template.Instance=se,t.template};function B(e){return Ke(e)}for(let[e,t]of Object.entries(N))A[e]={get(){let s=U(this,ie(t.open,t.close,this._styler),this._isEmpty);return Object.defineProperty(this,e,{value:s}),s}};A.visible={get(){let e=U(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:e}),e}};var We=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(let e of We)A[e]={get(){let{level:t}=this;return function(...s){let r=ie(N.color[je[t]][e](...s),N.color.close,this._styler);return U(this,r,this._isEmpty)}}};for(let e of We){let t="bg"+e[0].toUpperCase()+e.slice(1);A[t]={get(){let{level:s}=this;return function(...r){let i=ie(N.bgColor[je[s]][e](...r),N.bgColor.close,this._styler);return U(this,i,this._isEmpty)}}}}var lr=Object.defineProperties(()=>{},{...A,level:{enumerable:!0,get(){return this._generator.level},set(e){this._generator.level=e}}}),ie=(e,t,s)=>{let r,i;return s===void 0?(r=e,i=t):(r=s.openAll+e,i=t+s.closeAll),{open:e,close:t,openAll:r,closeAll:i,parent:s}},U=(e,t,s)=>{let r=(...i)=>P(i[0])&&P(i[0].raw)?qe(r,Ge(r,...i)):qe(r,i.length===1?""+i[0]:i.join(" "));return Object.setPrototypeOf(r,lr),r._generator=e,r._styler=t,r._isEmpty=s,r},qe=(e,t)=>{if(e.level<=0||!t)return e._isEmpty?"":t;let s=e._styler;if(s===void 0)return t;let{openAll:r,closeAll:i}=s;if(t.indexOf("\x1B")!==-1)for(;s!==void 0;)t=or(t,s.close,s.open),s=s.parent;let n=t.indexOf(`
`);return n!==-1&&(t=ar(t,i,r,n)),r+t+i},ee,Ge=(e,...t)=>{let[s]=t;if(!P(s)||!P(s.raw))return t.join(" ");let r=t.slice(1),i=[s.raw[0]];for(let n=1;n<s.length;n++)i.push(String(r[n-1]).replace(/[{}\\]/g,"\\$&"),String(s.raw[n]));return ee===void 0&&(ee=$e()),ee(e,i.join(""))};Object.defineProperties(B.prototype,A);var v=B();v.supportsColor=te;v.stderr=B({level:re?re.level:0});v.stderr.supportsColor=re;Qe.exports=v});var ze=f((Jr,Ve)=>{"use strict";var b=class extends Error{constructor(t,s,r){super("[ParserError] "+t,s,r),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,b)}},F=class{constructor(t){this.parser=t,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}},L=class{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new F(this.parseStart)}parse(t){if(t.length===0||t.length==null)return;this._buf=String(t),this.ii=-1,this.char=-1;let s;for(;s===!1||this.nextChar();)s=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=1114112;let t;do t=this.state.parser,this.runOne();while(this.state.parser!==t);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(t){if(typeof t!="function")throw new b("Tried to set state to non-existent state: "+JSON.stringify(t));this.state.parser=t}goto(t){return this.next(t),this.runOne()}call(t,s){s&&this.next(s),this.stack.push(this.state),this.state=new F(t)}callNow(t,s){return this.call(t,s),this.runOne()}return(t){if(this.stack.length===0)throw this.error(new b("Stack underflow"));t===void 0&&(t=this.state.buf),this.state=this.stack.pop(),this.state.returned=t}returnNow(t){return this.return(t),this.runOne()}consume(){if(this.char===1114112)throw this.error(new b("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(t){return t.line=this.line,t.col=this.col,t.pos=this.pos,t}parseStart(){throw new b("Must declare a parseStart method")}};L.END=1114112;L.Error=b;Ve.exports=L});var Xe=f((Vr,Ze)=>{"use strict";Ze.exports=e=>{let t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}});var $=f((zr,et)=>{"use strict";et.exports=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t}});var rt=f((Zr,tt)=>{"use strict";var E=$(),oe=class extends Date{constructor(t){super(t+"Z"),this.isFloating=!0}toISOString(){let t=`${this.getUTCFullYear()}-${E(2,this.getUTCMonth()+1)}-${E(2,this.getUTCDate())}`,s=`${E(2,this.getUTCHours())}:${E(2,this.getUTCMinutes())}:${E(2,this.getUTCSeconds())}.${E(3,this.getUTCMilliseconds())}`;return`${t}T${s}`}};tt.exports=e=>{let t=new oe(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}});var nt=f((Xr,it)=>{"use strict";var st=$(),ur=global.Date,ae=class extends ur{constructor(t){super(t),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${st(2,this.getUTCMonth()+1)}-${st(2,this.getUTCDate())}`}};it.exports=e=>{let t=new ae(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}});var at=f((es,ot)=>{"use strict";var q=$(),he=class extends Date{constructor(t){super(`0000-01-01T${t}Z`),this.isTime=!0}toISOString(){return`${q(2,this.getUTCHours())}:${q(2,this.getUTCMinutes())}:${q(2,this.getUTCSeconds())}.${q(3,this.getUTCMilliseconds())}`}};ot.exports=e=>{let t=new he(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}});var j=f((exports,module)=>{"use strict";module.exports=makeParserClass(ze());module.exports.makeParserClass=makeParserClass;var TomlError=class extends Error{constructor(t){super(t),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}};TomlError.wrap=e=>{let t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t};module.exports.TomlError=TomlError;var createDateTime=Xe(),createDateTimeFloat=rt(),createDate=nt(),createTime=at(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}var _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return hasOwnProperty.call(e,t)?!0:(t==="__proto__"&&defineProperty(e,"__proto__",descriptor),!1)}var INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_TABLE}var TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return e===null||typeof e!="object"?!1:e[_type]===TABLE}var _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_LIST}var LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return e===null||typeof e!="object"?!1:e[_type]===LIST}var _custom;try{let utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}var _inspect=_custom||"inspect",BoxedBigInt=class{constructor(t){try{this.value=global.BigInt.asIntN(64,t)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}},INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),global.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return e===null||typeof e!="object"?!1:e[_type]===INTEGER}var FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return e===null||typeof e!="object"?!1:e[_type]===FLOAT}function tomlType(e){let t=typeof e;if(t==="object"){if(e===null)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){class t extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(r){let i=this.ctx,n=r.key.pop();for(let o of r.key){if(hasKey(i,o)&&!isTable(i[o]))throw this.error(new TomlError("Can't redefine existing key"));i=i[o]=i[o]||Table()}if(hasKey(i,n))throw this.error(new TomlError("Can't redefine existing key"));return i[_declared]=!0,isInteger(r.value)||isFloat(r.value)?i[n]=r.value.valueOf():i[n]=r.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(r){return this.state.resultTable?this.state.resultTable.push(r):this.state.resultTable=[r],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(r){return this.returnNow({key:this.state.resultTable,value:r})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return();if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("comments")}while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)&&(!isTable(this.ctx[r])||this.ctx[r][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[r]=this.ctx[r]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)||(this.ctx[r]=List()),isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[r])){let i=Table();this.ctx[r].push(i),this.ctx=i}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else{if(isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(r){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(r){return this.returnNow(r)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd3):(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd3(){return this.char===CHAR_APOS?(this.state.buf+="'",this.next(this.parseLiteralMultiEnd4)):this.returnNow()}parseLiteralMultiEnd4(){return this.char===CHAR_APOS?(this.state.buf+="'",this.return()):this.returnNow()}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}recordEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}errorControlCharIn(r){let i="\\u00";return this.char<16&&(i+="0"),i+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in ${r}, use ${i} instead`))}recordMultiEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd3):(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEnd3(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.next(this.parseMultiEnd4)):this.returnNow()}parseMultiEnd4(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.return()):this.returnNow()}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(r){try{let i=parseInt(r,16);if(i>=SURROGATE_FIRST&&i<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(i))}catch(i){throw this.error(TomlError.wrap(i))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{let r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{let r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(r){return this.state.resultArr||(this.state.resultArr=InlineList(tomlType(r))),isFloat(r)||isInteger(r)?this.state.resultArr.push(r.valueOf()):this.state.resultArr.push(r),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(r){let i=this.state.resultTable,n=r.key.pop();for(let o of r.key){if(hasKey(i,o)&&(!isTable(i[o])||i[o][_declared]))throw this.error(new TomlError("Can't redefine existing key"));i=i[o]=i[o]||Table()}if(hasKey(i,n))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(r.value)||isFloat(r.value)?i[n]=r.value.valueOf():i[n]=r.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTablePostComma);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTablePostComma(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)throw this.error(new TomlError("Empty elements in inline tables are not permitted"));if(this.char===CHAR_RCUB)throw this.error(new TomlError("Trailing commas in inline tables are not permitted"));return this.goto(this.parseInlineTable)}}return t}});var K=f((ts,ht)=>{"use strict";ht.exports=fr;function fr(e,t){if(e.pos==null||e.line==null)return e;let s=e.message;if(s+=` at row ${e.line+1}, col ${e.col+1}, pos ${e.pos}:
`,t&&t.split){let r=t.split(/\n/),i=String(Math.min(r.length,e.line+3)).length,n=" ";for(;n.length<i;)n+=" ";for(let o=Math.max(0,e.line-1);o<Math.min(r.length,e.line+2);++o){let a=String(o+1);if(a.length<i&&(a=" "+a),e.line===o){s+=a+"> "+r[o]+`
`,s+=n+"  ";for(let h=0;h<e.col;++h)s+=" ";s+=`^
`}else s+=a+": "+r[o]+`
`}}return e.message=s+`
`,e}});var ct=f((rs,lt)=>{"use strict";lt.exports=mr;var pr=j(),gr=K();function mr(e){global.Buffer&&global.Buffer.isBuffer(e)&&(e=e.toString("utf8"));let t=new pr;try{return t.parse(e),t.finish()}catch(s){throw gr(s,e)}}});var pt=f((ss,ft)=>{"use strict";ft.exports=br;var dr=j(),ut=K();function br(e,t){t||(t={});let s=0,r=t.blocksize||40960,i=new dr;return new Promise((o,a)=>{setImmediate(n,s,r,o,a)});function n(o,a,h,c){if(o>=e.length)try{return h(i.finish())}catch(u){return c(ut(u,e))}try{i.parse(e.slice(o,o+a)),setImmediate(n,o+a,a,h,c)}catch(u){c(ut(u,e))}}}});var dt=f((is,mt)=>{"use strict";mt.exports=Rr;var Cr=require("stream"),gt=j();function Rr(e){return e?_r(e):wr(e)}function _r(e){let t=new gt;return e.setEncoding("utf8"),new Promise((s,r)=>{let i,n=!1,o=!1;function a(){if(n=!0,!i)try{s(t.finish())}catch(u){r(u)}}function h(u){o=!0,r(u)}e.once("end",a),e.once("error",h),c();function c(){i=!0;let u;for(;(u=e.read())!==null;)try{t.parse(u)}catch(g){return h(g)}if(i=!1,n)return a();o||e.once("readable",c)}})}function wr(){let e=new gt;return new Cr.Transform({objectMode:!0,transform(t,s,r){try{e.parse(t.toString(s))}catch(i){this.emit("error",i)}r()},flush(t){try{this.push(e.finish())}catch(s){this.emit("error",s)}t()}})}});var bt=f((ns,S)=>{"use strict";S.exports=ct();S.exports.async=pt();S.exports.stream=dt();S.exports.prettyError=K()});var At=f((os,ue)=>{"use strict";ue.exports=xr;ue.exports.value=ce;function xr(e){if(e===null)throw R("null");if(e===void 0)throw R("undefined");if(typeof e!="object")throw R(typeof e);if(typeof e.toJSON=="function"&&(e=e.toJSON()),e==null)return null;let t=d(e);if(t!=="table")throw R(t);return le("","",e)}function R(e){return new Error("Can only stringify objects, not "+e)}function Ct(e){return Object.keys(e).filter(t=>Rt(e[t]))}function Tr(e){return Object.keys(e).filter(t=>!Rt(e[t]))}function W(e){let t=Array.isArray(e)?[]:Object.prototype.hasOwnProperty.call(e,"__proto__")?{["__proto__"]:void 0}:{};for(let s of Object.keys(e))e[s]&&typeof e[s].toJSON=="function"&&!("toISOString"in e[s])?t[s]=e[s].toJSON():t[s]=e[s];return t}function le(e,t,s){s=W(s);let r,i;r=Ct(s),i=Tr(s);let n=[],o=t||"";r.forEach(h=>{var c=d(s[h]);c!=="undefined"&&c!=="null"&&n.push(o+G(h)+" = "+xt(s[h],!0))}),n.length>0&&n.push("");let a=e&&r.length>0?t+"  ":"";return i.forEach(h=>{n.push(Sr(e,a,h,s[h]))}),n.join(`
`)}function Rt(e){switch(d(e)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return e.length===0||d(e[0])!=="table";case"table":return Object.keys(e).length===0;default:return!1}}function d(e){return e===void 0?"undefined":e===null?"null":typeof e=="bigint"||Number.isInteger(e)&&!Object.is(e,-0)?"integer":typeof e=="number"?"float":typeof e=="boolean"?"boolean":typeof e=="string"?"string":"toISOString"in e?isNaN(e)?"undefined":"datetime":Array.isArray(e)?"array":"table"}function G(e){let t=String(e);return/^[-A-Za-z0-9_]+$/.test(t)?t:_t(t)}function _t(e){return'"'+wt(e).replace(/"/g,'\\"')+'"'}function Ar(e){return"'"+e+"'"}function yr(e,t){for(;t.length<e;)t="0"+t;return t}function wt(e){return e.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,t=>"\\u"+yr(4,t.codePointAt(0).toString(16)))}function Er(e){let t=e.split(/\n/).map(s=>wt(s).replace(/"(?="")/g,'\\"')).join(`
`);return t.slice(-1)==='"'&&(t+=`\\
`),`"""
`+t+'"""'}function xt(e,t){let s=d(e);return s==="string"&&(t&&/\n/.test(e)?s="string-multiline":!/[\b\t\n\f\r']/.test(e)&&/"/.test(e)&&(s="string-literal")),ce(e,s)}function ce(e,t){switch(t||(t=d(e)),t){case"string-multiline":return Er(e);case"string":return _t(e);case"string-literal":return Ar(e);case"integer":return Tt(e);case"float":return Hr(e);case"boolean":return Or(e);case"datetime":return Nr(e);case"array":return Ir(e.filter(s=>d(s)!=="null"&&d(s)!=="undefined"&&d(s)!=="nan"));case"table":return Lr(e);default:throw R(t)}}function Tt(e){return String(e).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function Hr(e){if(e===1/0)return"inf";if(e===-1/0)return"-inf";if(Object.is(e,NaN))return"nan";if(Object.is(e,-0))return"-0.0";let[t,s]=String(e).split(".");return Tt(t)+"."+s}function Or(e){return String(e)}function Nr(e){return e.toISOString()}function Ir(e){e=W(e);let t="[",s=e.map(r=>ce(r));return s.join(", ").length>60||/\n/.test(s)?t+=`
  `+s.join(`,
  `)+`
`:t+=" "+s.join(", ")+(s.length>0?" ":""),t+"]"}function Lr(e){e=W(e);let t=[];return Object.keys(e).forEach(s=>{t.push(G(s)+" = "+xt(e[s],!1))}),"{ "+t.join(", ")+(t.length>0?" ":"")+"}"}function Sr(e,t,s,r){let i=d(r);if(i==="array")return Mr(e,t,s,r);if(i==="table")return Dr(e,t,s,r);throw R(i)}function Mr(e,t,s,r){r=W(r);let i=d(r[0]);if(i!=="table")throw R(i);let n=e+G(s),o="";return r.forEach(a=>{o.length>0&&(o+=`
`),o+=t+"[["+n+`]]
`,o+=le(n+".",t,a)}),o}function Dr(e,t,s,r){let i=e+G(s),n="";return Ct(r).length>0&&(n+=t+"["+i+`]
`),n+le(i+".",t,r)}});var yt=f(fe=>{"use strict";fe.parse=bt();fe.stringify=At()});var Q=require("node:fs");var Ye=Y(ne());var I=require("node:fs"),y=require("node:path");function k(e){let t=e??process.cwd(),s=(0,y.join)(t,".git"),r=!1;try{if((0,I.existsSync)(s)&&(0,I.statSync)(s).isDirectory())return t}catch{r=!0}if(r||e==="/")console.log(Ye.default.red("Could not find the root of the repository.")),process.exit(1);else return k((0,y.resolve)(t,".."))}function cr(e){return(0,y.join)(k(e),".git")}function Je(){let e=cr(process.cwd());return e?(0,I.existsSync)((0,y.join)(e,"MERGE_HEAD")):!1}var Ht=require("node:path"),H=require("node:fs"),Ot=Y(yt()),ge=Y(ne());var pe={scopes:[],maxMessageLength:72,mergeKind:":twisted_rightwards_arrows:"},_=(0,Ht.join)(k(),".koumurc.toml");function Et(e,t){let s;try{s=Object.entries(e[t])}catch{throw new Error(`Invalid map "${t}" in ${_}`)}for(let r of s)if(!Array.isArray(r)||r.length!==2||typeof r[0]!="string"||typeof r[1]!="string")throw new Error(`Invalid map item for "${t}" in ${_}`);return s}function Pr(e,t){let s;try{s=Number(e[t])}catch{throw new Error(`Invalid number for "${t}" in ${_}`)}return s}function Br(e,t){let s;try{if(s=e[t],typeof s!="string")throw new Error}catch{throw new Error(`Invalid string for "${t}" in ${_}`)}return s}function Nt(){(!(0,H.existsSync)(_)||!(0,H.statSync)(_).isFile())&&(console.log(ge.default.red("No configuration file found, Koumu wont check your commit until a `.koumurc.toml` file is created at the root of your repository.")),process.exit(1));let e=Ot.default.parse((0,H.readFileSync)(_).toString()),t,s,r,i;try{t=Et(e,"kinds"),s=e.scopes?Et(e,"scopes"):pe.scopes,r=e.maxMessageLength?Pr(e,"maxMessageLength"):pe.maxMessageLength,i=e.mergeKind?Br(e,"mergeKind"):pe.mergeKind}catch(n){console.log(ge.default.red(n.message)),process.exit(1)}return{kinds:t,scopes:s,maxMessageLength:r,mergeKind:i}}var{mergeKind:It}=Nt(),St=process.argv[2],fs=process.argv[3];Je()||process.exit(0);var Lt=(0,Q.readFileSync)(St).toString();if(!Lt.startsWith(It+" ")){let e=`${It} ${Lt}`;(0,Q.writeFileSync)(St,e)}
